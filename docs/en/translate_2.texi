
@unnumberedsec Daemon mode (@option{-d, --daemon}).
It silently handles all processes related to a directory and can be controlled manually via @emph{interactive mode}. It is independent of the terminal in use, which can be closed without consequences. It is, in the full sense, the @emph{server} mode of ZDL: the daemon mode is always waiting for new links to be processed and ends only for user intervention, through an interactive interface. The daemon mode consumes less resources than other modes.

@htmlend

@node Readline,Editor,Modi,Top
@htmlstart

@unnumbered Readline
The execution of @emph{standard output modes}, in the absence of an external input (@emph{link} entered through the command line, a @emph{pipe}, a container @emph{DLC} or a text file, the extension of a browser ...), start the @emph{readline of ZDL}. It is almost identical to the Bash readline: use the same history and type the @kbd{Enter} key to execute a command. But the ZDL readline accepts, as commands, only links that take the form of an @emph{http, https or ftp} URL, a link @emph{irc/xdcc} and torrent files.
@* @*
In the presence of spaces in the URL, these are automatically converted to the standard @emph{percent code} for URLs (any spaces to the left and right of the URL are ignored). Each link must be entered individually, when the @emph{Enter} key is pressed. @*
Using the mouse, you can @emph{paste} a list of links, but these must be arranged in different rows. @*
Empty lines and links already registered are ignored, strings that do not correspond to an URL are explicitly rejected and recorded in the log file produced within the same directory, while accepted URLs are recorded gradually in the file automatically managed by ZDL, such as @emph{download queue}. @* @*

At any time, while entering links via the readline, you can change the @emph{download queue} with the default editor (@ref{Editor}). The download processes are started by the command @kbd{M-x}, which closes the readline and executes the download queue.
@* @*


@htmlend

@node Editor,Homonymy,Readline,Top
@htmlstart

@unnumbered Editor
You can check the @emph{download queue} through an editor. In fact, the list of links to be processed is recorded in a temporary file managed by ZDL. The links are processed from the first to the last: in case of manual restart or unintentional disconnection, ZDL examines the next link. From each mode of use of the program it is possible to start an editor to alter the links and their order of execution.
The editor can also be used in place of the @emph{readline of ZDL} (@ref{Readline}), from the command line through the corresponding options (@ref{The ZDL command}).
@* @*
The choice of the editor can be explicit (from the command line) or implicit, with the start of the default editor: the latter can be specified in the ZDL configuration (@command{zdl [-c|--configure]} ). In the absence of specific indications (for options and configuration), ZDL runs the default editor for the Bash or for the operating system. If Cygwin is used, the ZDL installer and update functions automatically install the @emph{Nano} editor: it is made available if no other default editor is present.
@* @*
@htmlend

@node Homonymy,IRC/XDCC,Editor,Top
@htmlstart

@unnumbered homonymy
The download can become problematic in the presence of homonymous files in the same directory, if ZDL does not already have information thanks to which it is possible to recognize any pending or completed downloading. This information can only be obtained from temporary files generated by ZDL for each link already processed. Deleting these files with the @option{--clean} option causes the loss of this data.
@* @*
In the event that, in the presence of homonymous files, there are no temporary files of the links to be processed, ZDL behaves in two alternative ways:

@table @option
@item @emph{default}
does not overwrite the homonymous file, but renames the new file as follows: inserts, between the name and the extension, a string composed of @code{__ BIS__} and a segment of the URL of the link, appropriately abbreviated and recoded. The additional string increases the likelihood that a homonymy problem is not repeated, even in the absence of temporary files from previous download processes. In any case, the download queue automatically cancels any repetitions of the same link.
@item @option{-r|--resume}
using this option will overwrite the homonymous file. In the absence of temporary files related to the link to be processed, downloading with Axel or Aria2 also overwrites the file from the beginning. This option can be configured as the default behavior (@command{zdl [-c|--configure]}).
@end table
@* @*

@htmlend

@node IRC/XDCC,Torrent,Homonymy,Top
@htmlstart
@unnumbered IRC/XDCC
The download of the requested files via chat, via XDCC commands, does not require any downloader or depends on any program: in this case, ZigzagDownLoader, in addition to managing downloads, performs them directly.

The input of the necessary data (IRC server host, the port is not necessary if it is 6667, channel, private message containing the xdcc command) can take place in different ways:
@table @option
@item @option{-x|--xdcc}
Start the interactive insertion of the three data in succession:

@enumerate
@item
the host of the IRC server (@emph{HOST[:PORT]}). If the host follows the channel (@code{irc://[HOST]/[CHAN]}), the next entry is skipped

@item
the channel to connect to (@emph{CHAN})

@item
the private message (@emph{PRIVMSG}) containing the command @command{XDCC SEND}
@end enumerate

@item @code{irc://[HOST[:PORT]]/[CHAN]/msg [PRIVMSG]}
Download via IRC/XDCC can be done, alternatively and without using options, by entering the information directly into the link, which must take the form above

@item @code{xdcc://...LINK OF XWEASEL ...}
ZigzagDownLoader automatically converts and uses xWeasel links, which include all the necessary information. Users who use Firefox/Iceweasel/Icecat/Chrome/Chromium, through these links, can download files directly from web pages with a click of the mouse, thanks to the extensions, also adapted for ZDL. Other browsers can download files with the same immediacy using other functions (in other sections: @ref{Conkeror}, @ref{zdl-xterm and XXXTerm/Xombrero})

@end table
@htmlend

@node Torrent,Filters,IRC/XDCC,Top
@htmlstart

@unnumbered Torrent
Aria2 allows the download of @emph{torrents}. This downloader does not have to be explicitly indicated to ZDL, but it must be installed correctly. A @emph{torrent} can be started by simply sending the @emph{URL magnet} (through all the systems provided for URLs in general, ZDL recognizes the @emph{magnet} automatically) or by sending the @emph{file torrent}, using the @code{--torrent-file=} option or the file marked with the @emph{.torrent} extension.
@* @*
The @emph{TCP} and @emph{UDP} ports can be set in the ZDL configuration (with the command @command{zdl --configure} or in the file @file{$ HOME/.zdl/zdl.conf}), explicitly indicated with the options @code{--tcp-port=} and @code{--udp-port=} or indicated in the @emph{Aria2} configuration. It is important that the ports are opened by the router.
@htmlend

@node Filters,Creating new extensions,Torrent,Top
@htmlstart

@unnumbered Filters
Filtering is possible only through the use of command line options (or through scripts that use ZDL). For advanced filters, the use of @emph{regular expressions [REGEX]} can be useful.

@htmlend



@c --------

@node Create new extensions,Recommended software and dependencies,Filters,Tops
@htmlstart

@unnumbered Create new extensions

@unnumberedsec How to add custom and experimental extensions.
ZDL incorporates the code it finds in all the bash scripts with the extension @code{.sh} in the
directory @file{$HOME/.zdl/extensions /}

@b{Example bash script:}

@example
if [[ "$url_in" = ~ PATTERN ]]
then
   url_in_file = $(sed -r 's|http://(.+)|http://USER:PASSWORD@@\1|g' \
                       <<< "$url_in")
   file_in="NOME_DEL_FILE"
   max_dl=1
   axel_parts=3
   aria2_connections=3

   end_extension
fi
@end example

The example can be used as a template for a link
recognized through a regex in the PATTERN.
The script modifies the download link in @code{$url_in}
to get the URL of the file in @code{$url_in_file},
adding USER and PASSWORD to access the server.
Also, indicate how to get the name of the file to download
(variable @code{$file_in}) and add or change options:
disable the @option{--max-downloads=} option if applied to the command
and establishes the number of parts to be downloaded with Axel (the
degree of acceleration, which by default is 32 but for several servers
may be excessive or insufficient, worsening performance)
and that of Aria2 (maximum 16 connections). The @code{end_extension} function
check if an @code{file_in} exists and if @code{url_in_file} is valid.

In this way, it is possible to extend ZDL to other file services
hosting (also for experimental purposes), add targeted options and
customized or implement program operation,
using the variables and functions available in ZDL without
change the source
@htmlend

@node Recommended software and dependencies,Conkeror,Creating new extensions,Top
@htmlstart

@unnumbered Recommended software and dependencies

@c @man{16}
@c @ifman @unnumberedsubsec Recommended software and dependencies
@table @emph
@pindex aria2
@item Aria2
Accelerated downloader and more

@pindex axel
@item Axel
Download accelerator

@pindex ffmpeg
@pindex avconv
@item FFmpeg/AVConv
Converter for MP3/FLAC

@pindex rtmpdump
@item cURL and RTMPDump
Downloader for RTMP services

@pindex xterm
@item XTerm
Default graphics terminal for GNU/Linux

@pindex flashgot
@item Flashgot
Firefox extension/Iceweasel/Icecat

@pindex youtube-dl
@item youtube-dl
Python script that expands and extends the ZDL extensions

@pindex pinfo
@item pinfo
@emph{lynx}-style program to browse @emph{info} files:
better than @emph{info} and more aesthetically similar to ZDL


@pindex editor
@item Emacs
@itemx Jed
@itemx Jupp
@itemx Midnight Commander (MCEdit)
@itemx Mg
@itemx Nano
@itemx Vi, Vim
@itemx Zile
At least one editor (here are just a few suggestions) to change the list of links to download from at any time
@end table

@unnumberedsubsec ZDL extends:
@table @emph
@pindex firefox
@pindex iceweasel
@pindex icecat
@item Firefox/Iceweasel/Icecat
Through the extension @emph{Flashgot}

@table @emph
@pindex firefox
@pindex iceweasel
@pindex icecat
@pindex chrome
@pindex chromium
@item Firefox/Iceweasel/Icecat/Chrome/Chromium
Through the extension @emph{External Application Button}

@pindex xxxterm
@pindex xombrero
@item XXXTerm/Xombrero
@file{zdl-xterm} script in @file{/usr/local/bin}

@pindex conkeror
@item Conkeror
@kbd{M-x zdl} autoinstalled function

@end table

@unnumberedsubsec Dependencies:
@table @emph
@item Nodejs
@item Panthomjs
Javascript engines for acquiring information from the web

@end table

@unnumberedsubsec Additional dependencies for Windows:
@table @emph
@item Cygwin (x86 32-bit)
Distribution for software porting of POSIX systems on Microsoft Windows

@end table

@c @end man

@htmlend

@node Conkeror,zdl-xterm and XXXTerm/Xombrero,Recommended software and dependencies,Top
@htmlstart
@unnumbered Conkeror: command @command{zdl}
ZDL automatically implements the Conkeror browser with a new command.
To use it, type: @kbd{M-x zdl}

@table @emph
@item After starting the command, the Conkeror minibuffer
@itemize @minus
@item
asks you to select the destination @emph{directory}
@item
offers the possibility to use the @emph{options} of ZDL
       (leave the field blank to not select them)
@item
show and index @emph{links} in the current buffer (for
       example the web page), to proceed with the selection of the link to be entered in the ZDL
       (the current page link corresponds to index 0)
@item
start ZDL in an xterm terminal or, if it has been selected
       the @option{--daemon} (or @option{-d}) option, in the background. In any case it is
       You can manage downloads using the interface
       interactive
@end itemize
@end table

@htmlend

@node zdl-xterm and XXXTerm/Xombrero,Installation and update,Conkeror,Top
@htmlstart
@unnumbered The @command script{zdl-xterm}: XXXTerm/Xombrero and other software

ZDL can be started from XXXTerm/Xombrero and from other software through
the @file{/usr/local/bin/zdl-xterm} script, which
it can be started from any application and from a terminal.
It was thought to make it possible to start ZDL in different contexts
from those provided by the program. In particular, XXXTerm can start
a bash script, using the command @command{:run_script},
passing it a single argument: the link of the current page. This
makes it impossible to start standard zdl in an instance of xterm,
because @command{:run_script} does not accept further parameters. The start
of zdl in a new virtual terminal xterm is made possible, precisely,
from @command{zdl-xterm}.

@unnumberedsec Use in XXXTerm:
@itemize @minus
@item
command @command{:run_script}
@item
type: @command{zdl-xterm}
@item
the program starts an instance of xterm which:
@itemize @bullet
@item
asks in which @emph{directory} to download the file
         (You can avoid this interaction by configuring zdl-xterm:
         enter in @file{/usr/local/bin/zdl-xterm}, as a value
         of the variable @code{default_directory} at the beginning of the
         script, the path to a @emph{valid directory})
@item
zdl-xterm starts zdl on the @emph{current URL}
@end itemize
@end itemize

@unnumberedsubsec Simplification for XXXTerm.
To use zdl-xterm more quickly, XXXTerm can be
configured in many ways.

@b{A tip:}
@itemize @minus
@item
open the file @file{$HOME/.xxxterm.conf}
@item
enter the following text:
@example
default_script = zdl-xterm
keybinding = run_script,C-z
@end example
@end itemize

With the suggested configuration, typing @kbd{Ctrl-z} starts
the command @prompt{:run_script} with the field already occupied by the name
of the script @command{zdl-xterm}: just press @kbd{enter}.


@htmlend

@node Installation and update,Why this program,zdl-xterm and XXXTerm/Xombrero,Top
@htmlstart
@unnumbered Installation and update of ZDL
ZDL installs automatically with a script for the @emph{Bash}.

@unnumberedsec Installation for GNU/Linux
@enumerate
@item
Download the installer (it's a script for the Bash):
   @url{http://download-mirror.savannah.gnu.org/releases/zdl/install_zdl.sh}
@item
Give the execution rights to the script:
   @command{chmod +x install_zdl.sh}
@item
run the script: @command{./install_zdl.sh}
@item
   The installation is automated and may ask you to install new packages
   (dependencies) choosing between several options: the recommended option is always the number 1
@item
If everything went well, you have finished the installation
@end enumerate


@unnumberedsec Installation for Microsoft Windows
ZDL also works on Windows, but through @emph{Cygwin}

@b{Installation on Windows:}
@table @emph
@item STEP 1) Installation of Cygwin 32 bit
automatic Cygwin installer (also updater for the
emulated system and installer for new packages): @*
@url http://cygwin.com/setup-x86.exe{} @* @*
We recommend the following mirror: @url{http://bo.mirror.garr.it} @*
Before proceeding with the installation, read the instructions for
the @emph{step 2}

@item STEP 2) Installation of dependencies
it may not be necessary as the next step
includes an automatic (not always working) system that could
be able to correctly install all packages
requested through the use of @command{apt-cyg}. However, we recommend
to install dependencies using the Cygwin installer,
choosing the additional packages as of @emph{step 1}. @* @*
@emph{List of packages to install:}
@command{wget ffmpeg rtmpdump diffutils nano coreutils vim-common openssl}
@* @*
For some packages it may be necessary to add a Cygwinports mirror:
@command{http://bo.mirror.garr.it/mirrors/sourceware.org/cygwinports/}

@item STEP 3) Installation of ZDL
@enumerate
@item
save in the folder @file{C:\cygwin} (the folder may be located
in another @emph{device}: check also in @file{D:},
@file{E:}, etc.) the following file:
@url{http://download-mirror.savannah.gnu.org/releases/zdl/install_zdl.sh}

@item
start @emph{Cygwin} installed in step 1

@item
type the following command: @command{/install_zdl.sh}
@end enumerate
@end table

@b{How to use ZDL on Windows:} starts Cygwin and uses ZDL in the terminal
started, as described in this guide. You can start downloading with ZDL
also from @emph{Flashgot} of @emph{Firefox} and from @emph{Conkeror} performed by MS-Windows:
Cygwin starts automatically.


@unnumberedsec Update ZDL
If a new version of the program is available, ZDL is updated
automatically. You can disable automatic updating
changing the configuration with @option{zdl --configure}.

To update ZDL manually, simply use
the @option{-u} option (@option{--update}).

Manual update can be forced by adding the option
@option{-f} (@option{--force})


@unnumberedsec Uninstall ZDL
An uninstall script is available: @url{http://download-mirror.savannah.gnu.org/releases/zdl/uninstall_zdl.sh}.

@htmlend

@node Why this program, Tags, Installation and update, Top
@htmlstart

@unnumbered Why this program
ZigzagDownLoader is an extensible, robust and fully controllable download manager with a terminal or, through sockets, with a web interface also suitable for a smartphone format (@emph{--socket}, @emph{--web-ui}). It can be integrated to the most popular web browsers (@emph{Firefox}, @emph{Chrome/Chromium} and @emph{Opera}) and to the desktop, using the extension @emph{External Application Button} and a more friendly graphic interface ( @emph{--gui} and @emph{--path-gui}).
It was born as a specific Bash script and turned into a downloader manager for @emph{Wget}, @emph{Axel} and @emph{Aria2} (default downloader), extending to video streaming and file hosting services. integrating with other applications. Today ZigzagDownLoader is also a downloader for @emph{IRC/XDCC}: the entire download and recovery process is automatic and requires no interaction via CHAT. Moreover, thanks to the adoption of Aria2, ZigzagDownLoader also manages the @emph{TORRENT}.

ZigzagDownLoader is a lot of things: a @emph{server/TCP client} useful for a @emph{NAS}, a @emph{command for the terminal}, an alternative @emph{downloader/download manager} and @emph{smart} for the browser, a @emph{graphic application} for the desktop ... all this simultaneously and more.

Despite its structural limitations, the language of the @emph{Bash} proved to be fit for purpose, especially for the flexibility of use in the management of the processes of other programs. Progressive efficiency has been achieved through the development of @emph{monolithic} scripts in the language of @emph{Awk} (@emph{Gawk}). The software also includes interpreters of other languages​(currently: @emph{node.js} and @emph{php}, necessary for processing the links of some services), providing support for further extensions and developments. ZigzagDownLoader is, in some ways, a complex example of @emph{polyglot programming}.

@unnumberedsubsec At least four development guidelines
The execution of the downloaders may require assistance: the connection may be interrupted, the IP address change, the downloads get stuck, the names of the downloaded files may not be intelligible or may coincide with others of files already saved, etc.
@emph{First}, ZigzagDownLoader is used to automate the management and recovery of downloads or to simplify any manual interventions. ZDL is designed, above all, for the @emph{accelerated} download of large files and for the recovery of their @emph{URL} from information available on the web or provided by the user.

@emph{Secondly}, automatic management is extended to file hosting, video streaming, torrent and irc/xdcc services: ZDL replaces the user in useless and boring operations, reducing them to the only act of starting the program.

@emph{A third goal} of the ZDL project is to provide new articulations and methods of use, in order to build interactions between programs and to make potentially unlimited automation possible.
Download management can be controlled by separate terminals in different modes. For example, ZDL can be started in @emph{daemon} mode and controlled in @emph{interactive} mode. The @emph{default} startup also offers different ways of interaction and output. Furthermore, ZDL can be integrated and connected with other programs.

@emph{Finally}, a peculiarity of the ZDL project consists in the search for efficiency and portability: the use of the tools provided by Bash makes it possible to run on hardware with limited capacity and on different operating systems. Designed for @emph{GNU/Linux}, ZDL is functional also on @emph{Windows} via @emph{Cygwin}. It is technically possible to extend its use on other operating systems that support the Bash (for example @emph{MacOSX}).

@htmlend


@node Tags,Copying,Why this program,Top
@htmlstart
@unnumbered Tags/indexes
@unnumberedsec General index
@printindex cp

@unnumberedsec Index of programs
@printindex pg

@htmlend


@node Copying,Contacts,Tags,Top
@htmlstart
@unnumbered Copying
@unnumberedsec Authors
Gianluca Zoni (zoninoz): @url{http://inventati.org/zoninoz}

@unnumberedsec Copyright
Copyright @copyright{} 2011 @*
 Gianluca Zoni (zoninoz): @url{http://inventati.org/zoninoz} @*

 For information or to collaborate on the project: @*
 @url{https://savannah.nongnu.org/projects/zdl}

@unnumberedsec License of ZigzagDownLoader (ZDL)
 
 This program is free software: you can redistribute it and/or modify it
 under the terms of the GNU General Public License as published
 by the Free Software Foundation; either version 3 of the License,
 or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program. If not, see @url{http://www.gnu.org/licenses/gpl.html}
 
@htmlend

@node Contacts,,Copying,Top
@htmlstart
@unnumbered Contacts
@unnumberedsec Report a bug (or support request)
@url{https://savannah.nongnu.org/bugs/?func=additem&amp;group=zdl}

@unnumberedsec Project mailing list
@emph{zdl-users - User list}:@* @url{https://lists.nongnu.org/mailman/listinfo/zdl-users}@*@*
@emph{zdl-devel - Development list}:@* @url{https://lists.nongnu.org/mailman/listinfo/zdl-devel}

@htmlend


@bye

@c @man{17}
@unnumberedsec MANUALS
In addition to this guide, you can consult:
@table @command
@item info zdl
Hypertext documentation that you can read more comfortably using @emph{pinfo} or @emph{Emacs}

@item @url{http://nongnu.org/zdl}
@Emph{ZigzagDownLoader} website
@end table

@unnumberedsec FILE
Configuration files are located in @file{$HOME/.zdl/}. In particular, the configuration file modified by @command{zdl -c} is @file{$HOME/.zdl/zdl.conf}.
You can freely create new extensions in @file{$HOME/.zdl/extensions/}. The program is located in @file{/usr/local/bin/} (@file{zdl} and @file{zdl-xterm}) and in @file{/usr/local/share/zdl/}.

In the download directory, ZDL produces temporary files in @file{.zdl_tmp/} and saves the list of @emph{links} in @file{links.txt}. Additionally, ZDL logs any problems in the @file{zdl_log.txt} file.

@unnumberedsec SEE ALSO
@command{xterm} (1), @command{conkeror} (1), @command{aria2c} (1), @command{axel} (1), @command{wget} (1), @command{curl} (1), @command{rtmpdump} (1), @command{ffmpeg} (1), @command{avconv} (1)

@unnumberedsec COPYING
@itemize
@item
Copyright @copyright{} 2011: Gianluca Zoni (zoninoz) <@email{zoninoz@@inventati.org}>
@item
ZDL is released under the GPL license (General Public License, v.3 and later).
@end itemize

@unnumberedsec AUTHORS
@unnumberedsubsec For information and to collaborate on the project:
@itemize
@item
@url{http://nongnu.org/zdl}
@item
@url{https://savannah.nongnu.org/projects/zdl}
@item
@url{https://joindiaspora.com/tags/zdl}
@end itemize

Gianluca Zoni (zoninoz)
@url{http://inventati.org/zoninoz}

@c @end man



@bye

